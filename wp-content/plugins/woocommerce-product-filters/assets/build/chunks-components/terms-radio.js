"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[468],{8653:function(e,t,l){l.r(t);var a=l(7462),r=l(9307),o=l(9196),n=l(2819),s=l(4988),i=l(9978),c=l(9512),u=l(5236),m=l(9768),f=l(2629),h=l(134),d=l(7536),g=l(374),p=l(9950),E=l(389),y=l(4271);const b=(0,r.lazy)((()=>l.e(7683).then(l.bind(l,521)))),v=WCF_Frontend,w=(0,y.zo)();t.default=e=>{let{name:t,value:l,setValue:S,options:k,group:z,...C}=e;const{watch:F,resetField:_}=(0,d.Gc)(),A="yes"===v.filter_num_products,M=12,[T,V]=(0,o.useState)(M),{submittedValues:Z,getStoredValue:B,getGroup:H,getInitialCounts:N,counts:L,prefilledValues:P,setPrefilling:R}=(0,E.CR)(),Y=B(z,t),G=F(t,Y),[I,W]=(0,o.useState)(!1),[q,U]=(0,o.useState)(!0),[j,x]=(0,o.useState)([]),D=H(z),J=!!(0,n.has)(D,"data."+C.facet.slug)&&(0,o.useMemo)((()=>D.data[C.facet.slug]),[D.data[C.facet.slug]]);if(!J)return(0,r.createElement)(r.Fragment,null,w.no_terms);(0,u.H)((()=>{const e=N(t);(0,n.has)(L,t)?x(L[t]):x(e),"horizontal"===C.layout&&((0,y.f6)(V,3,t),(0,n.has)(Z,t)&&W(Array.isArray(Z[t])?Z[t].toString():[]))})),(0,o.useEffect)((()=>{const e=G;e!==I&&W(!(0,n.isEmpty)(e)&&e)}),[G]);const K=e=>{W(e),S(t,e)};(0,o.useEffect)((()=>{"horizontal"!==C.layout&&(0,E.BB)(x,t,{method:U,itemsAmount:M,mobile:C?.mobile})}),[]),(0,o.useEffect)((()=>{(0,n.has)(P,t)&&!(0,n.isEqual)(P[t],G)&&(0,n.isEmpty)(G)&&(R(!0),S(t,P[t][0].toString()),R(!1))}),[P]),(0,o.useEffect)((()=>{(0,n.has)(Z,t)||!0!==C.mobile||(R(!0),_(t),R(!1))}),[Z]),(0,o.useEffect)((()=>(y.YB.on("filterToggled-"+t,(e=>{S(t,""),_(t),W(!1)})),()=>{y.YB.remove("filterToggled-"+t)})),[]),(0,g.Z)("wcf-reset-filters",(()=>{R(!0),S(t,""),W(!1),R(!1)}));const O=e=>{let t=[];return(0,h.li)(e,((e,l,a,o)=>{var n;const i=React.createElement(s.Z,{overrides:(0,p.oU)(e.depth),value:Number.isFinite(e.id)?e.id.toString():e.id,key:e.id},(0,r.createElement)(r.Fragment,null,(0,f.decodeEntities)(e.label),A&&(0,r.createElement)("span",{className:"wcf-choices-counter"},"(",null!==(n=e?.count)&&void 0!==n?n:0,")")));t.push(i)}),{childrenPath:"children"}),t},Q=(0,y.V9)(J,j),X=!0===q||!0===C?.mobile?Q.slice(0,T):Q,$=Array.isArray(Q)?parseInt(Q.length):0;return $>M&&!0!==C?.mobile&&q&&"horizontal"!==C.layout?(0,r.createElement)(m.LW,{style:{height:250},trackYProps:{renderer:e=>{const{elementRef:t,...l}=e;return(0,r.createElement)("span",(0,a.Z)({},l,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,y.e9)(e.scrollTop,e.scrollHeight)>=40&&T<$&&V(T+20)}},(0,r.createElement)(i.Z,{value:I,onChange:e=>K(e.currentTarget.value),name:"number",align:c.H.vertical},O(X))):(0,n.isEmpty)(X)?(0,r.createElement)("span",{className:"wcf-no-options-label"},w.no_options):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{id:"wcf-items-container-"+t},(0,r.createElement)(i.Z,{value:I,onChange:e=>K(e.currentTarget.value),name:"number",align:c.H.vertical},O(X)),(0,r.createElement)(b,{displayShowMore:$>T&&!0===C?.mobile||$>T&&"horizontal"===C.layout,showMoreMethod:()=>V($),displayShowLess:T>M&&!0===C?.mobile||T>M&&"horizontal"===C.layout,showLessMethod:()=>V(M)})))}}}]);