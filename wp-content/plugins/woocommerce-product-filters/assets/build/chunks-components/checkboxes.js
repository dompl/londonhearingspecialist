"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[4630],{5164:function(e,t,l){l.r(t);var r=l(7462),a=l(9307),s=l(9196),o=l(3026),n=l(385),i=l(2629),c=l(2819),m=l(5236),u=l(9768),f=l(7536),d=l(374),h=l(9950),p=l(389),E=l(4271),y=l(7826),g=l.n(y);const w=(0,a.lazy)((()=>l.e(7683).then(l.bind(l,521)))),b=WCF_Frontend,k=(0,E.zo)();t.default=e=>{let{name:t,value:l,setValue:y,options:v,group:S,...A}=e;const{watch:_}=(0,f.Gc)(),z="yes"===b.filter_num_products,{getGroup:C,getStoredValue:N,getInitialCounts:Z,counts:M,prefilledValues:B,setPrefilling:V}=(0,p.CR)(),F=!0===A?.mobile?12:20,[L,P]=(0,s.useState)(F),T=N(S,t),W=_(t,T),[Y,G]=(0,s.useState)(Array.isArray(T)?T:[]),[H,I]=(0,s.useState)(!0),[O,R]=(0,s.useState)([]),q=C(S),x=!!(0,c.has)(q,"data."+A.facet.slug)&&(0,s.useMemo)((()=>q.data[A.facet.slug]),[q.data[A.facet.slug]]);if(!x)return k.no_terms;(0,m.H)((()=>{const e=Z(t);(0,c.has)(M,t)?R(M[t]):R(e)})),(0,s.useEffect)((()=>{(0,c.has)(B,t)&&!(0,c.isEqual)(B[t],W)&&(0,c.isEmpty)(W)&&(V(!0),y(t,B[t].map(Number)),G(B[t].map(Number)),V(!1))}),[B]),(0,s.useEffect)((()=>{"horizontal"!==A.layout&&(0,p.BB)(R,t,{method:I,itemsAmount:F,mobile:A?.mobile})}),[]),(0,s.useEffect)((()=>(E.YB.on("filterToggled-"+t,(e=>{V(!0),y(t,Array.isArray(e.value)?e.value.map(String):[]),V(!1)})),()=>{E.YB.remove("filterToggled-"+t)})),[]),(0,d.Z)("wcf-reset-filters",(()=>{V(!0),y(t,[]),G([]),V(!1)}));const j=(0,E.V9)(x,O),D=!0===H||!0===A?.mobile?j.slice(0,L):j,J=Array.isArray(j)?parseInt(j.length):0,K=function(e){let{id:l,label:s,slug:m,children:u,count:f,depth:d}=e;return(0,a.createElement)("div",{role:"listitem"},(0,a.createElement)(o.Z,{checked:Y.includes(l),labelPlacement:n.Oi.right,overrides:h.W9,onChange:e=>((e,l)=>{let r=Y.filter((function(){return!0}));if(!0===e)r.push(l);else if(!1===e){var a=Y.indexOf(l);r.splice(a,1)}G(r),(0,c.isEmpty)(r)?y(t,!1):(0,c.isEmpty)(r)||y(t,g()(r))})(e.target.checked,l)},(0,i.decodeEntities)(s),z&&(0,a.createElement)("span",{className:"wcf-choices-counter"},"(",f,")")),(0,a.createElement)("div",{className:"wcf-is-child-term"},u&&u.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e))))))};return J>F&&!0!==A?.mobile&&"horizontal"!==A.layout&&H?(0,a.createElement)(u.LW,{style:{height:250},trackYProps:{renderer:e=>{const{elementRef:t,...l}=e;return(0,a.createElement)("span",(0,r.Z)({},l,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,E.e9)(e.scrollTop,e.scrollHeight)>=60&&L<J&&P(L+20)}},(0,a.createElement)("div",{id:"wcf-items-container-"+t,role:"list"},D.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e)))))):(0,c.isEmpty)(D)?(0,a.createElement)("span",{className:"wcf-no-options-label"},k.no_options):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{id:"wcf-items-container-"+t,role:"list"},D.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e))))),(0,a.createElement)(w,{displayShowMore:J>L&&!0===A?.mobile||J>L&&"horizontal"===A.layout,showMoreMethod:()=>P(J),displayShowLess:L>F&&!0===A?.mobile||L>F&&"horizontal"===A.layout,showLessMethod:()=>P(F)}))}}}]);