"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[6661],{4801:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(9307),o=r(9196),a=r(9233),i=r(5236),s=r(2629),u=r(5736),c=r(9016),l=r.n(c);var m=r(7180),p=r.n(m),f=function(e){let t;function r(e){const r={code:"USD",symbol:"$",symbolPosition:"left",thousandSeparator:",",decimalSeparator:".",precision:2,...e};t={code:r.code.toString(),symbol:r.symbol.toString(),symbolPosition:r.symbolPosition.toString(),decimalSeparator:r.decimalSeparator.toString(),priceFormat:a(r),thousandSeparator:r.thousandSeparator.toString(),precision:parseInt(r.precision,10)}}function o(e,r=!1){const n=function({precision:e=null,decimalSeparator:t=".",thousandSeparator:r=","},n){if(void 0===n)return"";if("number"!=typeof n&&(n=parseFloat(n)),isNaN(n))return"";let o=null===e?NaN:Number(e);if(isNaN(o)){const[,e]=n.toString().split(".");o=e?e.length:0}return l()(n,o,t,r)}(t,e);if(""===n)return n;const{priceFormat:o,symbol:a,code:i}=t;return(0,u.sprintf)(o,r?i:a,n)}function a(e){if(e.priceFormat)return function(e){const t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}(e.priceFormat.toString());switch(e.symbolPosition){case"left":return"%1$s%2$s";case"right":return"%2$s%1$s";case"left_space":return"%1$s %2$s";case"right_space":return"%2$s %1$s"}return"%1$s%2$s"}return r(e),{getCurrencyConfig:()=>({...t}),getDataForCountry:function(e,t={},r={}){const n=t[e]||{},o=r[n.currency_code];return o?{code:n.currency_code,symbol:(0,s.decodeEntities)(o),symbolPosition:n.currency_pos,thousandSeparator:n.thousand_sep,decimalSeparator:n.decimal_sep,precision:n.num_decimals}:{}},setCurrency:r,formatAmount:o,formatCurrency:function(e){return p()("Currency().formatCurrency",{version:"5.0.0",alternative:"Currency().formatAmount",plugin:"WooCommerce",hint:"`formatAmount` accepts the same arguments as formatCurrency"}),o(e)},getPriceFormat:a,formatDecimal(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return 0;const{precision:r}=t;return Math.round(e*Math.pow(10,r))/Math.pow(10,r)},formatDecimalString(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return"";const{precision:r}=t;return e.toFixed(r)},render(e){return"number"!=typeof e&&(e=parseFloat(e)),e<0?(0,n.createElement)("span",{className:"is-negative"},o(e)):o(e)}}},d=r(7536),y=r(374),g=r(5609),h=r(5274),S=r(9950),b=r(2819),v=r(389),F=r(4271);const _=WCF_Frontend,C=_.currency,N=!0===_.is_taxonomy_page,E=_.current_taxonomy,x=(0,F.zo)();var A=e=>{let{name:t,value:r,setValue:s,group:u,...c}=e;const{watch:l,resetField:m}=(0,d.Gc)(),{getStoredValue:p,prefilledValues:A,setPrefilling:M,submittedValues:$}=(0,v.CR)(),[w,P]=(0,o.useState)(!0),[D,T]=(0,o.useState)(Math.round(_.highest_price)),V=[0,D];if(0===V[0]&&0===V[1])return x.no_prices;let k=p(u,t);(0,b.isEmpty)(k)||(k=k.split(","));const B=l(t,!!Array.isArray(k)&&k),[Z,j]=(0,o.useState)(Array.isArray(k)?k:V),H=(0,o.useMemo)((()=>f(C)),[C]);return(0,o.useEffect)((()=>{let e=B;(0,b.isEmpty)(e)?j([0,D]):Array.isArray(e)||(e=e.split(",").map(Number),j(e))}),[B]),(0,o.useEffect)((()=>{(0,b.has)(A,t)&&!(0,b.isEqual)(A[t],B)&&(0,b.isEmpty)(B)&&(M(!0),s(t,A[t]),j(A[t].split(",").map(Number)),M(!1))}),[A]),(0,o.useEffect)((()=>{(0,b.has)($,t)||(M(!0),m(t),j([0,D]),M(!1))}),[$]),(0,o.useEffect)((()=>(F.YB.on("filterToggled-"+t,(e=>{M(!0),m(t),s(t,!1),j([0,D]),M(!1)})),()=>{F.YB.remove("filterToggled-"+t)})),[]),(0,y.Z)("wcf-reset-filters",(()=>{M(!0),s(t,!1),j([0,D]),M(!1)})),(0,i.H)((async()=>{if(N)try{const e=await h.Z.post(_.rest_api_url+"/pricing",{filter:c.facet.id,...E});e.data?.max&&(j([0,Math.round(e.data?.max)]),T(Math.round(e.data?.max))),P(!1)}catch(e){console.error(e)}else P(!1)})),w?(0,n.createElement)(g.Spinner,null):(0,n.createElement)(a.Z,{value:Z,onChange:e=>{let{value:t}=e;return t&&j(t)},onFinalChange:e=>{let{value:r}=e;return s(t,r.toString())},valueToLabel:e=>H.formatAmount(e),min:0,max:D,overrides:(0,S.$7)(H.formatAmount)})}},9016:function(e){e.exports=function(e,t,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+e)?+e:0,a=isFinite(+t)?Math.abs(t):0,i=void 0===n?",":n,s=void 0===r?".":r,u="";return u=(a?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);var r=(""+e).split("e"),n="";return+r[1]+t>0&&(n="+"),(+(Math.round(+r[0]+"e"+n+(+r[1]+t))+"e-"+t)).toFixed(t)}(o,a).toString():""+Math.round(o)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(u[1]||"").length<a&&(u[1]=u[1]||"",u[1]+=new Array(a-u[1].length+1).join("0")),u.join(s)}}}]);