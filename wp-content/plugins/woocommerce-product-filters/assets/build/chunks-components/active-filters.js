"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[4820],{1106:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i=n(9307),r=n(2819),s=n(2694),o=n(4376),l=n(9196),a="undefined"==typeof window?l.useEffect:l.useLayoutEffect;function u(e,t,n,i,r,s){void 0===i&&(i={}),void 0===r&&(r=!0),void 0===s&&(s=!1);var o=function(e){var t=function(e,t){void 0===t&&(t=!1);var n=t?a:l.useEffect,i=(0,l.useRef)(e);return n((function(){i.current=e})),i}(e);return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"function"==typeof t.current&&t.current.apply(t,e)}}(n);(s?a:l.useEffect)((function(){return void 0!==e&&r?(e.addEventListener(t,o,i),function(){e.removeEventListener(t,o,i)}):function(){}}),[t,i])}var c=[void 0,null,null],f=function(e){var t,n,i=void 0===e?{}:e,r=i.updateOnScroll,s=void 0===r||r,o=i.updateOnResize,a=void 0===o||o,f=(0,l.useState)(null),d=f[0],m=f[1],v=(0,l.useState)(null),w=v[0],h=v[1],p=(0,l.useCallback)((function(e){h(e)}),[]),y=(0,l.useCallback)((function(){window.requestAnimationFrame((function(){w&&m(function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width,x:t.left,y:t.top}}(w))}))}),[w]);return(0,l.useLayoutEffect)((function(){y()}),[y]),void 0===(t=a)&&(t=!0),void 0===(n=!0)&&(n=!1),"undefined"!=typeof window?u(window,"resize",(function(){y()}),{passive:!0},t,n):console.warn("useOnWindowResize can't attach an event listener as window is undefined."),function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),"undefined"!=typeof window?u(window,"scroll",(function(){y()}),{passive:!0},t,n):console.warn("useOnWindowScroll can't attach an event listener as window is undefined.")}(0,s,!0),"undefined"==typeof window?(console.warn("useDimensionsRef: window is undefined."),c):[p,d,w]},d=n(5236),m=n(4548),v=n(389),w=n(4271),h=n(4184),p=n.n(h);const y=(0,i.lazy)((()=>n.e(98).then(n.bind(n,482)))),g=WCF_Frontend,E=g.clear_btn_text;var b=e=>{const{horizontal:t}=e,{filters:n,pluckTaxonomyData:l,clearForms:a,submittedValues:u}=(0,v.CR)(),c="yes"===g.slideout_desktop,h="yes"===g.slideout_mobile,b=(0,o.Lm)()<960,[k,_,C]=f(),[L,F]=(0,i.useState)(0),R=e=>{const t=[],i=["categories","tags","attributes","colors","taxonomy"];return(0,r.forEach)(e,((e,r)=>{const s=n.find((e=>e.slug===r)),o=s.filter_by;if((i.includes(o)||o.startsWith("tax_"))&&"range"!==s.options.filter_type){const n=l(s.slug,e);t.push({filter:s,slug:r,value:n})}else t.push({filter:s,slug:r,value:null})})),t},[S,z]=(0,i.useState)((0,w.w2)()?R(u):[]),A=document.getElementById("wcf-sorting-bar"),x=()=>(0,r.isEmpty)(S)&&(!h||!c)&&!b;(0,d.H)((()=>{const e=R(u);(0,r.isEmpty)(e)||z(e),x()?A.classList.add("is-hidden"):A.classList.remove("is-hidden")}));const D=()=>{let e=!1;return C?.clientHeight>40&&(e=!0),e};if((0,m.l)((async()=>{x()?A.classList.add("is-hidden"):A.classList.remove("is-hidden"),await(0,w._S)(".wcf-active-filter").then((e=>{const t=document.getElementsByClassName("wcf-active-filter");t?.length>0&&F(t.length)}))}),[S]),(0,i.useEffect)((()=>{const e=v.Gd.subscribe((e=>e.submittedValues),(e=>{(0,r.isEmpty)(e)?S!==[]&&(0,r.isEmpty)(e)&&z([]):z(R(e))}));return()=>{e()}}),[]),(0,r.isEmpty)(S))return null;const N=()=>(0,i.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),(0,s.doAction)("wcpf.beforeClearingFilters"),(0,w.w2)()?(0,w.sq)({},!1):"instant"!==WCF_Frontend.filter_mode?a():(0,w.sq)({},!1)},className:"wcf-reset-filters-btn",style:{}},(0,i.createElement)("span",null,E));if(!0===t){const e=p()("wcf-active-filters","horizontal",{"is-long-list":D()});return(0,i.createElement)("div",{className:e,ref:k},!D()&&(0,i.createElement)(N,null),S.map(((e,t)=>{let{filter:n,slug:r,value:s}=e;return(0,i.createElement)(y,{key:t,filter:n,value:s,filters:S})})),D()&&(0,i.createElement)(N,null))}return(0,i.createElement)(i.Fragment,null,S.map(((e,t)=>{let{filter:n,slug:r,value:s}=e;return(0,i.createElement)(y,{key:t,filter:n,value:s,filters:S})})),(0,i.createElement)("div",{className:"wcf-active-filters"},(0,i.createElement)("a",{href:"#",onClick:e=>(e.preventDefault(),(0,w.sq)({},!1)),className:"wcf-reset-filters-btn"},(0,i.createElement)("span",null,E))))}},4548:function(e,t,n){n.d(t,{l:function(){return r}});var i=n(9196);function r(e,t){var n=(0,i.useRef)(!1);void 0===t||Array.isArray(t)?Array.isArray(t)&&0===t.length&&console.warn("Using [] as the second argument makes useDidUpdate a noop. The second argument should either be `undefined` or an array of length greater than 0."):t=[t],(0,i.useEffect)((function(){n.current?e():n.current=!0}),t),(0,i.useEffect)((function(){return function(){n.current=!1}}),[])}}}]);