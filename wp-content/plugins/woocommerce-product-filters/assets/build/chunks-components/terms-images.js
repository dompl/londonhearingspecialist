"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[6368],{1984:function(e,t,a){var l=a(9307);t.Z=function(e){let{icon:t,size:a=24,...s}=e;return(0,l.cloneElement)(t,{width:a,height:a,...s})}},7231:function(e,t,a){var l=a(9307),s=a(444);const o=(0,l.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(s.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));t.Z=o},3271:function(e,t,a){a.r(t);var l=a(7462),s=a(9307),o=a(9196),r=a(2819),n=a(9470),i=a(1524),c=a(1984),m=a(7231),u=a(4184),f=a.n(u),d=a(2629),h=a(5236),p=a(9768),g=a(7536),E=a(374),y=a(389),w=a(4271);const b=(0,s.lazy)((()=>a.e(7683).then(a.bind(a,521)))),_=WCF_Frontend,v=(0,w.zo)();t.default=e=>{let{name:t,value:a,setValue:u,options:z,group:N,...C}=e;const{watch:S}=(0,g.Gc)(),A="yes"===_.filter_num_products,{submittedValues:k,getGroup:G,getStoredValue:Z,getInitialCounts:L,counts:F,prefilledValues:M,setPrefilling:V}=(0,y.CR)(),x=12,[B,P]=(0,o.useState)(x),[R,T]=(0,o.useState)(!0),W=Z(N,t),Y=S(t,W),[q,H]=(0,o.useState)(Array.isArray(W)?W:[]),[I,j]=(0,o.useState)([]),D=G(N),J=!!(0,r.has)(D,"data."+C.facet.slug)&&(0,o.useMemo)((()=>D.data[C.facet.slug]),[D.data[C.facet.slug]]);if(!J)return(0,s.createElement)(s.Fragment,null,v.no_terms);const K=e=>{let a=[];q.includes(e)?(a=q.filter((t=>t!==e)),H(q.filter((t=>t!==e)))):(a=[...q,e],H(a)),u(t,!(0,r.isEmpty)(a)&&a)};(0,h.H)((async()=>{const e=L(t);if((0,r.has)(F,t)?j(F[t]):j(e),"horizontal"===C.layout){const e=WCF_Frontend.mobile_images_limit;await(0,w.f6)(P,e,t),(0,r.has)(k,t)&&H(Array.isArray(k[t])?k[t].map(Number):[])}})),(0,o.useEffect)((()=>{const e=Y;e!==q&&H(Array.isArray(e)?e:[])}),[Y]),(0,o.useEffect)((()=>{(0,r.has)(M,t)&&!(0,r.isEqual)(M[t],Y)&&(0,r.isEmpty)(Y)&&(V(!0),u(t,M[t].map(Number)),V(!1))}),[M]),(0,o.useEffect)((()=>{"horizontal"!==C.layout&&(0,y.BB)(j,t,{method:T,itemsAmount:x,mobile:C?.mobile})}),[]),(0,o.useEffect)((()=>{if((0,r.has)(k,t)&&!0===C.mobile){const e=k[t].map(Number);(0,r.isEqual)(e,q)||(V(!0),u(t,e),V(!1))}}),[k]),(0,o.useEffect)((()=>(w.YB.on("filterToggled-"+t,(e=>{V(!0),u(t,e.value),V(!1)})),()=>{w.YB.remove("filterToggled-"+t)})),[]),(0,E.Z)("wcf-reset-filters",(()=>{V(!0),u(t,[]),H([]),V(!1)}));const O="horizontal"===C.layout?1:2,Q="image_name"===C.facet.options.image_display_mode,U=(0,w.V9)(J,I),X=!0===R||!0===C?.mobile?U.slice(0,B):U,$=Array.isArray(U)?parseInt(U.length):0,ee=()=>(0,s.createElement)(n.Z,{flexGridColumnCount:O,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",className:"wcf-img-grid",role:"list"},X.map((e=>{const t=e.image,a=e.term_id,l=e.name,o=e.count;var n=f()({"has-img":!(0,r.isEmpty)(t),"wcf-img-item":!0,"with-label":!0===Q,"no-label":!1===Q});return(0,s.createElement)(i.ZP,{className:n,key:a,onClick:e=>K(a),role:"listitem"},q.includes(a)&&(0,s.createElement)("div",{className:"active-item"},(0,s.createElement)(c.Z,{icon:m.Z,size:20,className:"toggle-cross"})),!(0,r.isEmpty)(t)&&(0,s.createElement)("div",{className:"img-container"},(0,s.createElement)("img",{src:t,alt:l})),Q&&(0,s.createElement)("span",null,(0,d.decodeEntities)(l),A&&(0,s.createElement)("span",{className:"wcf-choices-counter"},"(",o,")")))})));return $>x&&!0!==C?.mobile&&R&&"horizontal"!==C.layout?(0,s.createElement)(p.LW,{style:{height:500},trackYProps:{renderer:e=>{const{elementRef:t,...a}=e;return(0,s.createElement)("span",(0,l.Z)({},a,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,w.e9)(e.scrollTop,e.scrollHeight)>=30&&B<$&&P(B+20)}},ee()):(0,r.isEmpty)(X)?(0,s.createElement)("span",{className:"wcf-no-options-label"},v.no_options):(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{id:"wcf-items-container-"+t},ee(),(0,s.createElement)(b,{displayShowMore:$>B&&!0===C?.mobile||$>B&&"horizontal"===C.layout,showMoreMethod:()=>P($),displayShowLess:B>x&&!0===C?.mobile||B>x&&"horizontal"===C.layout,showLessMethod:()=>P(x)})))}}}]);