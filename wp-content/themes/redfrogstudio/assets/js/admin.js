!function(){"use strict";var t,u,i,l,a,e,o,s,n;function r(a){var e={},t=!1;a.attr("data-modaal-type")&&(t=!0,e.type=a.attr("data-modaal-type")),a.attr("data-modaal-content-source")&&(t=!0,e.content_source=a.attr("data-modaal-content-source")),a.attr("data-modaal-animation")&&(t=!0,e.animation=a.attr("data-modaal-animation")),a.attr("data-modaal-animation-speed")&&(t=!0,e.animation_speed=a.attr("data-modaal-animation-speed")),a.attr("data-modaal-after-callback-delay")&&(t=!0,e.after_callback_delay=a.attr("data-modaal-after-callback-delay")),a.attr("data-modaal-is-locked")&&(t=!0,e.is_locked="true"===a.attr("data-modaal-is-locked")),a.attr("data-modaal-hide-close")&&(t=!0,e.hide_close="true"===a.attr("data-modaal-hide-close")),a.attr("data-modaal-background")&&(t=!0,e.background=a.attr("data-modaal-background")),a.attr("data-modaal-overlay-opacity")&&(t=!0,e.overlay_opacity=a.attr("data-modaal-overlay-opacity")),a.attr("data-modaal-overlay-close")&&(t=!0,e.overlay_close="false"!==a.attr("data-modaal-overlay-close")),a.attr("data-modaal-accessible-title")&&(t=!0,e.accessible_title=a.attr("data-modaal-accessible-title")),a.attr("data-modaal-start-open")&&(t=!0,e.start_open="true"===a.attr("data-modaal-start-open")),a.attr("data-modaal-fullscreen")&&(t=!0,e.fullscreen="true"===a.attr("data-modaal-fullscreen")),a.attr("data-modaal-custom-class")&&(t=!0,e.custom_class=a.attr("data-modaal-custom-class")),a.attr("data-modaal-close-text")&&(t=!0,e.close_text=a.attr("data-modaal-close-text")),a.attr("data-modaal-close-aria-label")&&(t=!0,e.close_aria_label=a.attr("data-modaal-close-aria-label")),a.attr("data-modaal-background-scroll")&&(t=!0,e.background_scroll="true"===a.attr("data-modaal-background-scroll")),a.attr("data-modaal-width")&&(t=!0,e.width=parseInt(a.attr("data-modaal-width"))),a.attr("data-modaal-height")&&(t=!0,e.height=parseInt(a.attr("data-modaal-height"))),a.attr("data-modaal-confirm-button-text")&&(t=!0,e.confirm_button_text=a.attr("data-modaal-confirm-button-text")),a.attr("data-modaal-confirm-cancel-button-text")&&(t=!0,e.confirm_cancel_button_text=a.attr("data-modaal-confirm-cancel-button-text")),a.attr("data-modaal-confirm-title")&&(t=!0,e.confirm_title=a.attr("data-modaal-confirm-title")),a.attr("data-modaal-confirm-content")&&(t=!0,e.confirm_content=a.attr("data-modaal-confirm-content")),a.attr("data-modaal-gallery-active-class")&&(t=!0,e.gallery_active_class=a.attr("data-modaal-gallery-active-class")),a.attr("data-modaal-loading-content")&&(t=!0,e.loading_content=a.attr("data-modaal-loading-content")),a.attr("data-modaal-loading-class")&&(t=!0,e.loading_class=a.attr("data-modaal-loading-class")),a.attr("data-modaal-ajax-error-class")&&(t=!0,e.ajax_error_class=a.attr("data-modaal-ajax-error-class")),a.attr("data-modaal-instagram-id")&&(t=!0,e.instagram_id=a.attr("data-modaal-instagram-id")),t&&a.modaal(e)}function c(i){let l=0;let s=!1;i("#ks-generate-xgen").off("click").on("click",function(a){i(".xgen-button").prop("disabled",!0),a.preventDefault(),s||(s=!0,i("#ks-generate-xgen-bar").html('<div class="progress" style="width: 0%;">0%</div>'),function o(){i.ajax({url:KsAdmin.ajax_url,method:"POST",data:{action:"AjaXgenGenerator",start:l,limit:1},success:function(a){var e,t;a.success?(l=a.data.next_start,e=a.data.total_images,t=((l<e?l:e)/e*100).toFixed(2),a=a.data.thumbnail,i("#ks-generate-xgen-bar").html(`
						<div style="position:relative" class="temp-540291">
						<div style="position:absolute; top:-55px; margin-left:-25px; left:${t}%"><img src="${a}" style="width:50px; height:50px; border-radius:50%"/></div>
            <div class="progress" style="width: ${t}%">${t}%</div>
						</div>
          `),l<e?o():(i(".temp-540291").remove(),a=` <div class="progress" style="width:100%">Success, all ${e} web generated!</div>`,i("#ks-generate-xgen-bar").addClass("success").html(a),s=!1)):(i("#ks-generate-xgen-bar").html(`
            <div class="progress error" style="width: 100%">Error!</div>
          `),console.error("Error processing chunk"),s=!1)},error:function(){i("#ks-generate-xgen-bar").html(`
            <div class="progress error" style="width: 100%">Error!</div>
          `),console.error("Ajax error occurred"),s=!1}})}())})}function d(s){s("#ks-delete-xgen").off("click").on("click",function(a){a.preventDefault(),function o(i=0,l=null){console.log("Processing offset: ",i),s.ajax({url:KsAdmin.ajax_url,method:"POST",data:{action:"AjaxDeleteXgenMeta",offset:i},success:function(a){var e,t;a.success?(console.log("Processed this batch: ",a.data.processed),null===l&&(l=a.data.total_items,console.log("Total items to process: ",l)),t=100<(t=((e=i+a.data.processed)/l*100).toFixed(2))?100:t,s("#ks-delete-xgen-bar").html(`<div class="progress" style="width: ${t}%;">${t}%</div>`),null!==a.data.next_offset&&e<l?o(a.data.next_offset,l):(console.log("All xGen Meta Processed"),s("#ks-delete-xgen-bar").html('<div class="progress" style="width: 100%;">Completed</div>'))):console.error("Error deleting xGen Meta chunk")},error:function(a,e,t){console.error("AJAX error:",e,"Details:",t)}})}(),s("#ks-generate-xgen-bar").html('<div class="progress" style="width: 0%;">0%</div>')}),s("#ks-show-xgen").off("click").on("click",function(a){a.preventDefault(),s.ajax({url:KsAdmin.ajax_url,method:"POST",data:{action:"AjaxDeleteXgenMetaTest"},success:function(a){a.success?console.log(a.data.data):console.error(a)}})})}function m(n){n("#ks-delete-webp").off("click").on("click",function(a){a.preventDefault(),function o(i=0,l=5,s=null){console.log(i),n.ajax({url:KsAdmin.ajax_url,method:"POST",data:{action:"AjaxDeleteWebPImages",start:i,limit:l},success:function(a){var e,t;a.success?(t=((e=(s=null===s?a.data.total_images:s)<i+l?s:i+l)/s*100).toFixed(2),n("#ks-delete-webp-bar").html(`<div class="progress" style="width: ${t}%;">${t}%</div>`),a.data.next_start&&e<s?o(a.data.next_start,l,s):n("#ks-delete-webp-bar").html('<div class="progress" style="width: 100%;">All WebP images deleted.</div>')):(console.log(a),console.error("Error deleting WebP images"))}})}(),n("#ks-delete-webp-bar").html('<div class="progress" style="width: 0%;">0%</div>')})}function p(a){var e,t,o={trigger:a("#component-request-trigger"),form:a("#component-request-form"),button:a("#component-request-submit"),content:a("#component-request"),container:a("#component-request-container"),message_container:a("#component-request-container .message-container"),form_html:a("#component-request-container").html(),action:"ks_component_request",class:a(".admin-modal.component-request"),ajax_url:KsAdmin.ajax_url};t=a,(e=o).trigger.modaal({type:"inline",content_source:"#component-request",hide_close:!0,background:"#1d2327",overlay_opacity:.8,width:680,animation_speed:100,overlay_close:!1,custom_class:"admin-modal component-request",after_open:function(){var s,n,r;n=t,r=!1,(s=e).form.on("submit",function(a){if(a.preventDefault(),!r){r=!0,s.button.prop("disabled",!0);for(var e={},t=s.form.serializeArray(),o=0;o<t.length;o++){var i=t[o].name,l=t[o].value;e[i]=l}n.post({url:s.ajax_url,type:"post",dataType:"json",data:{action:s.action,data:e,_ajax_nonce:e.nonce},beforeSend:function(){s.container.addClass("active")},success:function(a){var e,t;a=a,t=n,(e=s).container.removeClass("active"),e.container.addClass("success"),e.form.remove(),e.container.html(a.data),t(".close-modal-icon").on("click",function(){e.trigger.modaal("close")})},error:function(a){var e,t;t=n,(e=s).container.removeClass("active"),e.message_container.addClass("is-active is-error").html('<div class="alert alert-danger" role="alert">An error occurred while submitting your component request. Please refresh this page and try submitting your request again. If the error continues, please notify the Webmaster.</div>'),e.button.remove(),t(".close-modal-icon").on("click",function(){e.trigger.modaal("close")})},complete:function(){var a;a=s,n(".close-modal-icon").on("click",function(){a.trigger.modaal("close")})}})}}),t(".close-modal-icon").on("click",function(){e.trigger.modaal("close")})}}),a(".close-modal-icon").on("click",function(){o.trigger.modaal("close")})}a=window,t={},a.KSFilterJS={addFilter:function(a,e){t[a]=t[a]||[],t[a].push(e)},applyFilters:function(a,e){return t[a]?t[a].reduce((a,e)=>e(a),e):e}},u=jQuery,i={init:function(a,e){var t=this;t.dom=u("body"),t.$elem=u(e),t.options=u.extend({},u.fn.modaal.options,t.$elem.data(),a),t.xhr=null,t.scope={is_open:!1,id:"modaal_"+(new Date).getTime()+Math.random().toString(16).substring(2),source:t.options.content_source||t.$elem.attr("href")},t.$elem.attr("data-modaal-scope",t.scope.id),t.private_options={active_class:"is_active"},t.lastFocus=null,t.options.is_locked||"confirm"==t.options.type||t.options.hide_close?t.scope.close_btn="":t.scope.close_btn='<button type="button" class="modaal-close" id="modaal-close" aria-label="'+t.options.close_aria_label+'"><span>'+t.options.close_text+"</span></button>","none"===t.options.animation&&(t.options.animation_speed=0,t.options.after_callback_delay=0),u(e).on("click.Modaal",function(a){a.preventDefault(),t.create_modaal(t,a)}),a=!0===t.options.outer_controls?"outer":"inner",t.scope.prev_btn='<button type="button" class="modaal-gallery-control modaal-gallery-prev modaal-gallery-prev-'+a+'" id="modaal-gallery-prev" aria-label="Previous image (use left arrow to change)"><span>Previous Image</span></button>',t.scope.next_btn='<button type="button" class="modaal-gallery-control modaal-gallery-next modaal-gallery-next-'+a+'" id="modaal-gallery-next" aria-label="Next image (use right arrow to change)"><span>Next Image</span></button>',!0===t.options.start_open&&t.create_modaal(t)},create_modaal:function(a,e){var t,a=this;if(a.lastFocus=a.$elem,!1!==a.options.should_open&&("function"!=typeof a.options.should_open||!1!==a.options.should_open())){switch(a.options.before_open.call(a,e),a.options.type){case"inline":a.create_basic();break;case"ajax":t=a.options.source(a.$elem,a.scope.source),a.fetch_ajax(t);break;case"confirm":a.options.is_locked=!0,a.create_confirm();break;case"image":a.create_image();break;case"iframe":t=a.options.source(a.$elem,a.scope.source),a.create_iframe(t);break;case"video":a.create_video(a.scope.source);break;case"instagram":a.create_instagram()}a.watch_events()}},watch_events:function(){var o=this;o.dom.off("click.Modaal keyup.Modaal keydown.Modaal"),o.dom.on("keydown.Modaal",function(a){var e=a.keyCode,a=a.target;9==e&&o.scope.is_open&&!u.contains(document.getElementById(o.scope.id),a)&&u("#"+o.scope.id).find('*[tabindex="0"]').focus()}),o.dom.on("keyup.Modaal",function(a){var e=a.keyCode,t=a.target;if(a.shiftKey&&9==a.keyCode&&o.scope.is_open&&(u.contains(document.getElementById(o.scope.id),t)||u("#"+o.scope.id).find(".modaal-close").focus()),!o.options.is_locked&&27==e&&o.scope.is_open)return!u(document.activeElement).is("input:not(:checkbox):not(:radio)")&&void o.modaal_close();"image"==o.options.type&&(37==e&&o.scope.is_open&&!u("#"+o.scope.id+" .modaal-gallery-prev").hasClass("is_hidden")&&o.gallery_update("prev"),39==e)&&o.scope.is_open&&!u("#"+o.scope.id+" .modaal-gallery-next").hasClass("is_hidden")&&o.gallery_update("next")}),o.dom.on("click.Modaal",function(a){a=u(a.target);!o.options.is_locked&&(o.options.overlay_close&&a.is(".modaal-inner-wrapper")||a.is(".modaal-close")||a.closest(".modaal-close").length)?o.modaal_close():a.is(".modaal-confirm-btn")?(a.is(".modaal-ok")&&o.options.confirm_callback.call(o,o.lastFocus),a.is(".modaal-cancel")&&o.options.confirm_cancel_callback.call(o,o.lastFocus),o.modaal_close()):a.is(".modaal-gallery-control")&&!a.hasClass("is_hidden")&&(a.is(".modaal-gallery-prev")&&o.gallery_update("prev"),a.is(".modaal-gallery-next"))&&o.gallery_update("next")})},build_modal:function(a){var e,t=this,o="",i=("instagram"==t.options.type&&(o=" modaal-instagram"),"video"==t.options.type?"modaal-video-wrap":"modaal-content");switch(t.options.animation){case"fade":e=" modaal-start_fade";break;case"slide-down":e=" modaal-start_slidedown";break;default:e=" modaal-start_none"}var l="",s=(t.options.fullscreen&&(l=" modaal-fullscreen"),""===t.options.custom_class&&void 0===t.options.custom_class||(t.options.custom_class=" "+t.options.custom_class),""),n=(t.options.width&&t.options.height&&"number"==typeof t.options.width&&"number"==typeof t.options.height?s=' style="max-width:'+t.options.width+"px;height:"+t.options.height+'px;overflow:auto;"':t.options.width&&"number"==typeof t.options.width?s=' style="max-width:'+t.options.width+'px;"':t.options.height&&"number"==typeof t.options.height&&(s=' style="height:'+t.options.height+'px;overflow:auto;"'),"image"!=t.options.type&&"video"!=t.options.type&&"instagram"!=t.options.type&&!t.options.fullscreen||(s=""),""),o=(t.is_touch()&&(n=' style="cursor:pointer;"'),'<div class="modaal-wrapper modaal-'+t.options.type+e+o+l+t.options.custom_class+'" id="'+t.scope.id+'"><div class="modaal-outer-wrapper"><div class="modaal-inner-wrapper"'+n+">");"video"!=t.options.type&&(o+='<div class="modaal-container"'+s+">"),o+='<div class="'+i+' modaal-focus" aria-hidden="false" aria-label="'+t.options.accessible_title+" - "+t.options.close_aria_label+'" role="dialog">',"inline"==t.options.type?o+='<div class="modaal-content-container" role="document"></div>':o+=a,o+="</div>"+t.scope.close_btn,"video"!=t.options.type&&(o+="</div>"),o+="</div>","image"==t.options.type&&!0===t.options.outer_controls&&(o+=t.scope.prev_btn+t.scope.next_btn),o+="</div></div>",u("#"+t.scope.id+"_overlay").length<1&&t.dom.append(o),"inline"==t.options.type&&a.appendTo("#"+t.scope.id+" .modaal-content-container"),t.modaal_overlay("show")},create_basic:function(){var a=u(this.scope.source),e="";a.length?(e=a.contents().detach(),a.empty()):e="Content could not be loaded. Please check the source and try again.",this.build_modal(e)},create_instagram:function(){var t=this,a=t.options.instagram_id,e="",o="Instagram photo couldn't be loaded, please check the embed code and try again.";return t.build_modal('<div class="modaal-content-container'+(""!=t.options.loading_class?" "+t.options.loading_class:"")+'">'+t.options.loading_content+"</div>"),""!=a&&null!=a?u.ajax({url:"https://api.instagram.com/oembed?url=http://instagr.am/p/"+a+"/",dataType:"jsonp",cache:!1,success:function(a){t.dom.append('<div id="temp-ig" style="width:0;height:0;overflow:hidden;">'+a.html+"</div>"),t.dom.attr("data-igloaded")?window.instgrm.Embeds.process():t.dom.attr("data-igloaded","true");var e="#"+t.scope.id+" .modaal-content-container";0<u(e).length&&setTimeout(function(){u("#temp-ig").contents().clone().appendTo(e),u("#temp-ig").remove()},1e3)},error:function(){e=o;var a=u("#"+t.scope.id+" .modaal-content-container");0<a.length&&(a.removeClass(t.options.loading_class).addClass(t.options.ajax_error_class),a.html(e))}}):e=o,!1},fetch_ajax:function(a){var t=this;null==t.options.accessible_title&&(t.options.accessible_title="Dialog Window"),null!==t.xhr&&(t.xhr.abort(),t.xhr=null),t.build_modal('<div class="modaal-content-container'+(""!=t.options.loading_class?" "+t.options.loading_class:"")+'">'+t.options.loading_content+"</div>"),t.xhr=u.ajax(a,{success:function(a){var e=u("#"+t.scope.id).find(".modaal-content-container");0<e.length&&(e.removeClass(t.options.loading_class),e.html(a),t.options.ajax_success.call(t,e))},error:function(a){"abort"!=a.statusText&&0<(a=u("#"+t.scope.id+" .modaal-content-container")).length&&(a.removeClass(t.options.loading_class).addClass(t.options.ajax_error_class),a.html("Content could not be loaded. Please check the source and try again."))}})},create_confirm:function(){var a=this,e='<div class="modaal-content-container"><h1 id="modaal-title">'+a.options.confirm_title+'</h1><div class="modaal-confirm-content">'+a.options.confirm_content+'</div><div class="modaal-confirm-wrap"><button type="button" class="modaal-confirm-btn modaal-ok" aria-label="Confirm">'+a.options.confirm_button_text+'</button><button type="button" class="modaal-confirm-btn modaal-cancel" aria-label="Cancel">'+a.options.confirm_cancel_button_text+"</button></div></div></div>";a.build_modal(e)},create_image:function(){var a=this,e="";if(a.$elem.is("[data-group]")||a.$elem.is("[rel]")){var t=a.$elem.is("[data-group]"),o=t?a.$elem.attr("data-group"):a.$elem.attr("rel"),t=u(t?'[data-group="'+o+'"]':'[rel="'+o+'"]'),c=(t.removeAttr("data-gallery-active","is_active"),a.$elem.attr("data-gallery-active","is_active"),o=t.length-1,[]),e='<div class="modaal-gallery-item-wrap">';t.each(function(a,e){var t="",o="",i="",l=!1,s=!1,n=e.getAttribute("data-modaal-desc"),r=e.getAttribute("data-gallery-active"),e=(u(e).attr("data-modaal-content-source")?t=u(e).attr("data-modaal-content-source"):u(e).attr("href")?t=u(e).attr("href"):u(e).attr("src")?t=u(e).attr("src"):(t="trigger requires href or data-modaal-content-source attribute",s=!0),i=""!=n&&null!=n?'<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+" - </span>"+(o=n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>":'<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+"</span></div>",{url:t,alt:o,rawdesc:n,desc:i,active:l=r?!0:l,src_error:s});c.push(e)});for(var i=0;i<c.length;i++){var l="",s=c[i].rawdesc?"Image: "+c[i].rawdesc:"Image "+i+" no description",n=(c[i].active&&(l=" "+a.private_options.active_class),c[i].src_error?c[i].url:'<img src="'+c[i].url+'" alt=" " style="width:100%">');e+='<div class="modaal-gallery-item gallery-item-'+i+l+'" aria-label="'+s+'">'+n+c[i].desc+"</div>"}e+="</div>",1!=a.options.outer_controls&&(e+=a.scope.prev_btn+a.scope.next_btn)}else{var r,t=!1,d=(a.$elem.attr("data-modaal-content-source")?r=a.$elem.attr("data-modaal-content-source"):a.$elem.attr("href")?r=a.$elem.attr("href"):a.$elem.attr("src")?r=a.$elem.attr("src"):(r="trigger requires href or data-modaal-content-source attribute",t=!0),""),s="",n=(a.$elem.attr("data-modaal-desc")?(s=a.$elem.attr("data-modaal-desc"),d='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image - </span>'+a.$elem.attr("data-modaal-desc").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>"):s="Image with no description",t?r:'<img src="'+r+'" alt=" " style="width:100%">');e='<div class="modaal-gallery-item is_active" aria-label="'+s+'">'+n+d+"</div>"}t=e,a.build_modal(t),u(".modaal-gallery-item.is_active").is(".gallery-item-0")&&u(".modaal-gallery-prev").hide(),u(".modaal-gallery-item.is_active").is(".gallery-item-"+o)&&u(".modaal-gallery-next").hide()},gallery_update:function(a){var i,l,s,n,r,c,d=this,m=u("#"+d.scope.id),p=m.find(".modaal-gallery-item").length-1;return 0!=p&&(i=m.find(".modaal-gallery-prev"),l=m.find(".modaal-gallery-next"),n=s=0,r=m.find(".modaal-gallery-item."+d.private_options.active_class),c="next"==a?r.next(".modaal-gallery-item"):r.prev(".modaal-gallery-item"),d.options.before_image_change.call(d,r,c),!("prev"==a&&m.find(".gallery-item-0").hasClass("is_active")||"next"==a&&m.find(".gallery-item-"+p).hasClass("is_active")))&&void r.stop().animate({opacity:0},250,function(){c.addClass("is_next").css({position:"absolute",display:"block",opacity:0});var a=u(document).width(),e=1140<a?280:50,t=(s=m.find(".modaal-gallery-item.is_next").width(),n=m.find(".modaal-gallery-item.is_next").height(),m.find(".modaal-gallery-item.is_next img").prop("naturalWidth")),o=m.find(".modaal-gallery-item.is_next img").prop("naturalHeight");n=a-e<t?(s=a-e,m.find(".modaal-gallery-item.is_next").css({width:s}),m.find(".modaal-gallery-item.is_next img").css({width:s}),m.find(".modaal-gallery-item.is_next").find("img").height()):(s=t,o),m.find(".modaal-gallery-item-wrap").stop().animate({width:s,height:n},250,function(){r.removeClass(d.private_options.active_class+" "+d.options.gallery_active_class).removeAttr("style"),r.find("img").removeAttr("style"),c.addClass(d.private_options.active_class+" "+d.options.gallery_active_class).removeClass("is_next").css("position",""),c.stop().animate({opacity:1},250,function(){u(this).removeAttr("style").css({width:"100%"}),u(this).find("img").css("width","100%"),m.find(".modaal-gallery-item-wrap").removeAttr("style"),d.options.after_image_change.call(d,c)}),m.find(".modaal-gallery-item").removeAttr("tabindex"),m.find(".modaal-gallery-item."+d.private_options.active_class).attr("tabindex","0").focus(),m.find(".modaal-gallery-item."+d.private_options.active_class).is(".gallery-item-0")?i.stop().animate({opacity:0},150,function(){u(this).hide()}):i.stop().css({display:"block",opacity:i.css("opacity")}).animate({opacity:1},150),m.find(".modaal-gallery-item."+d.private_options.active_class).is(".gallery-item-"+p)?l.stop().animate({opacity:0},150,function(){u(this).hide()}):l.stop().css({display:"block",opacity:i.css("opacity")}).animate({opacity:1},150)})})},create_video:function(a){this.build_modal('<div class="modaal-video-container">'+('<iframe src="'+a+'" class="modaal-video-frame" frameborder="0" allowfullscreen></iframe>')+"</div>")},create_iframe:function(a){var e=this,a=null!==e.options.width||void 0!==e.options.width||null!==e.options.height||void 0!==e.options.height?'<iframe src="'+a+'" class="modaal-iframe-elem" frameborder="0" allowfullscreen></iframe>':'<div class="modaal-content-container">Please specify a width and height for your iframe</div>';e.build_modal(a)},modaal_open:function(){var a=this,e=u("#"+a.scope.id),t=a.options.animation;"none"===t&&(e.removeClass("modaal-start_none"),a.options.after_open.call(a,e)),"fade"===t&&e.removeClass("modaal-start_fade"),"slide-down"===t&&e.removeClass("modaal-start_slide_down");u(".modaal-wrapper *[tabindex=0]").removeAttr("tabindex"),("image"==a.options.type?u("#"+a.scope.id).find(".modaal-gallery-item."+a.private_options.active_class):e.find(".modaal-iframe-elem").length?e.find(".modaal-iframe-elem"):e.find(".modaal-video-wrap").length?e.find(".modaal-video-wrap"):e.find(".modaal-focus")).attr("tabindex","0").focus(),"none"!==t&&setTimeout(function(){a.options.after_open.call(a,e)},a.options.after_callback_delay)},modaal_close:function(){var a=this,e=u("#"+a.scope.id);a.options.before_close.call(a,e),null!==a.xhr&&(a.xhr.abort(),a.xhr=null),"none"===a.options.animation&&e.addClass("modaal-start_none"),"fade"===a.options.animation&&e.addClass("modaal-start_fade"),"slide-down"===a.options.animation&&e.addClass("modaal-start_slide_down"),setTimeout(function(){"inline"==a.options.type&&u("#"+a.scope.id+" .modaal-content-container").contents().detach().appendTo(a.scope.source),e.remove(),a.options.after_close.call(a),a.scope.is_open=!1},a.options.after_callback_delay),a.modaal_overlay("hide"),null!=a.lastFocus&&a.lastFocus.focus()},modaal_overlay:function(a){var e=this;"show"==a?(e.scope.is_open=!0,e.options.background_scroll||e.dom.addClass("modaal-noscroll"),u("#"+e.scope.id+"_overlay").length<1&&e.dom.append('<div class="modaal-overlay" id="'+e.scope.id+'_overlay"></div>'),u("#"+e.scope.id+"_overlay").css("background",e.options.background).stop().animate({opacity:e.options.overlay_opacity},e.options.animation_speed,function(){e.modaal_open()})):"hide"==a&&u("#"+e.scope.id+"_overlay").stop().animate({opacity:0},e.options.animation_speed,function(){u(this).remove(),e.dom.removeClass("modaal-noscroll")})},is_touch:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},l=[],u.fn.modaal=function(o){return this.each(function(a){var e=u(this).data("modaal");if(e){if("string"==typeof o)switch(o){case"open":e.create_modaal(e);break;case"close":e.modaal_close()}}else{var t=Object.create(i);t.init(o,this),u.data(this,"modaal",t),l.push({element:u(this).attr("class"),options:o})}})},u.fn.modaal.options={type:"inline",content_source:null,animation:"fade",animation_speed:300,after_callback_delay:350,is_locked:!1,hide_close:!1,background:"#000",overlay_opacity:"0.8",overlay_close:!0,accessible_title:"Dialog Window",start_open:!1,fullscreen:!1,custom_class:"",background_scroll:!1,should_open:!0,close_text:"Close",close_aria_label:"Close (Press escape to close)",width:null,height:null,before_open:function(){},after_open:function(){},before_close:function(){},after_close:function(){},source:function(a,e){return e},confirm_button_text:"Confirm",confirm_cancel_button_text:"Cancel",confirm_title:"Confirm Title",confirm_content:"<p>This is the default confirm dialog content. Replace me through the options</p>",confirm_callback:function(){},confirm_cancel_callback:function(){},gallery_active_class:"gallery_active_item",outer_controls:!1,before_image_change:function(a,e){},after_image_change:function(a){},loading_content:'<div class="modaal-loading-spinner"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>',loading_class:"is_loading",ajax_error_class:"modaal-error",ajax_success:function(){},instagram_id:null},u(function(){var a=u(".modaal"),e=(a.length&&a.each(function(){r(u(this))}),new MutationObserver(function(a){a.forEach(function(a){a.addedNodes&&0<a.addedNodes.length&&[].some.call(a.addedNodes,function(a){var e=u(a);(e.is("a")||e.is("button"))&&(e.hasClass("modaal")?r(e):l.forEach(function(a){if(a.element==e.attr("class"))return u(e).modaal(a.options),!1}))})})})),t={subtree:!0,attributes:!0,childList:!0,characterData:!0};setTimeout(function(){e.observe(document.body,t)},500)}),a=jQuery,(o=a)(".acf-flexible-content .layout").addClass("-collapsed"),o("#acf-flexible-content-collapse").detach(),o("#rdsn-acf-repeater-collapse").detach(),KSFilterJS.addFilter("DataModaalSettings",function(a,e){return a.custom_class="component-request-modaal",a}),0!==(o=(e=a)(".modal-inline")).length&&o.each(function(){var a=KSFilterJS.applyFilters("DataModaalSettings",e(this).data("modaal-settings"),e(this));console.log(a),e(this).modaal(a)}),(s=a)("#ks-delete-build-images").on("click",function(a){a.preventDefault(),s.ajax({url:KsAdmin.ajax_url,type:"POST",data:{action:"deleteBuildImages"},beforeSend:function(){s("#ks-delete-build-images-message").html('<span style="color:red">Deleting build images. Please wait ...</span>'),s("#ks-delete-build-images").hide(),s(".acf-field-426ef67c").find(".acf-input").remove()},success:function(a){s("#ks-delete-build-images-message").empty().removeAttr("style"),s("html, body").animate({scrollTop:0},"slow");const e=s(`
									<div class="acf-admin-notice notice notice-success is-dismissible" data-persisted="false">
											<p>Build Images deleted</p>
											<button type="button" class="notice-dismiss">
													<span class="screen-reader-text">Dismiss this notice.</span>
											</button>
									</div>`).appendTo(".acf-settings-wrap h1");e.find(".notice-dismiss").on("click",function(){e.fadeOut("slow",function(){s(this).remove()})}),setTimeout(function(){location.reload()},3e3)},error:function(a){alert("Error: "+a.data)}})}),p(a),c(a),d(a),m(a),(n=a)('.ks-admin-form input[type="checkbox"]').on("change",function(){var a=n(this).closest("label");n(this).prop("checked")?a.addClass("active"):a.removeClass("active")})}();